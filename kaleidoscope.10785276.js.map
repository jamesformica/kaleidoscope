{"version":3,"sources":["index.js"],"names":["runState","speed","POINTS","RADIUS","SLICE","SLICE_HEIGHT","Math","abs","sin","PI","kCanvas","document","getElementById","kCtx","getContext","patternCanvas","patternCtx","width","height","invPatternCanvas","invPatternCtx","clearCanvas","canvas","ctx","clearRect","clearCanvases","drawWedge","x","y","img","degree","d1","d2","save","beginPath","moveTo","arc","lineTo","clip","drawImage","restore","drawInverseWedge","translate","scale","drawWheel","i","rotate","random","min","max","floor","selectPoints","imgWidth","imgHeight","top","left","right","bottom","points","push","nextPoint","current","destination","pointCounter","kaleidoscopeGo","destinationPoint","loop","distanceX","distanceY","window","requestAnimationFrame","selectImage","e","Image","onload","src","target","options","getElementsByClassName","length","onclick","handleFiles","file","inputElement","files","reader","FileReader","result","readAsDataURL","addEventListener","click"],"mappings":"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","file":"kaleidoscope.10785276.js","sourceRoot":"..","sourcesContent":["let runState = false\nlet speed = 0.5\n\nconst POINTS = 10\nconst RADIUS = 300\nconst SLICE = 30\nconst SLICE_HEIGHT = Math.abs(Math.sin(30 * Math.PI / 180) * RADIUS) + 10\n\nconst kCanvas = document.getElementById('kaleidoscope')\nconst kCtx = kCanvas.getContext('2d')\n\nconst patternCanvas = document.getElementById('pattern')\nconst patternCtx = patternCanvas.getContext('2d')\npatternCanvas.width = RADIUS\npatternCanvas.height = SLICE_HEIGHT\n\nconst invPatternCanvas = document.getElementById('invPattern')\nconst invPatternCtx = invPatternCanvas.getContext('2d')\ninvPatternCanvas.width = RADIUS\ninvPatternCanvas.height = SLICE_HEIGHT\n\nconst clearCanvas = (canvas, ctx) => {\n  ctx.clearRect(0, 0, canvas.width, canvas.height)\n}\n\nconst clearCanvases = () => {\n  clearCanvas(patternCanvas, patternCtx)\n  clearCanvas(invPatternCanvas, invPatternCtx)\n  clearCanvas(kCanvas, kCtx)\n}\n\nconst drawWedge = (x, y, img) => {\n  let degree = 345\n  const d1 = degree - 0.5\n  const d2 = degree + SLICE + 0.2 // remove white seams\n\n  patternCtx.save()\n\n  // draw cheese wedge\n  patternCtx.beginPath()\n  patternCtx.moveTo(0, SLICE_HEIGHT / 2)\n  patternCtx.arc(0, SLICE_HEIGHT / 2, RADIUS, (360 - d2) * Math.PI / 180, (360 - d1) * Math.PI / 180)\n  patternCtx.lineTo(0, SLICE_HEIGHT / 2)\n\n  // crop image section into wedge\n  patternCtx.clip();\n  patternCtx.drawImage(img, x, y, RADIUS, SLICE_HEIGHT, 0, 0, RADIUS, SLICE_HEIGHT)\n  patternCtx.restore()\n}\n\nconst drawInverseWedge = () => {\n  invPatternCtx.save()\n  invPatternCtx.translate(0, SLICE_HEIGHT)\n  invPatternCtx.scale(1, -1)\n  invPatternCtx.drawImage(patternCanvas, 0, 0);\n  invPatternCtx.restore()\n}\n\nconst drawWheel = () => {\n  kCtx.save()\n  kCtx.translate(RADIUS, RADIUS)\n\n  for (let i = 0; i <= 360 / SLICE; i += 1) {\n    kCtx.rotate(SLICE * Math.PI / 180)\n    kCtx.drawImage(i % 2 ? patternCanvas : invPatternCanvas, 0, SLICE_HEIGHT / -2)\n  }\n\n  kCtx.restore()\n}\n\nconst random = (min, max) => Math.floor(Math.random() * (max - min) + min)\n\nconst selectPoints = (imgWidth, imgHeight) => {\n  const top = SLICE_HEIGHT\n  const left = 0\n  const right = imgWidth - RADIUS\n  const bottom = imgHeight - SLICE_HEIGHT\n\n  const points = []\n\n  for (let i = 0; i < POINTS; i += 1) {\n    points.push({ x: random(left, right), y: random(top, bottom) })\n  }\n\n  return points\n}\n\nconst nextPoint = (current, destination) => {\n  if (current === destination) return 0\n  if (current > destination) return -1 * speed\n  return speed\n}\n\nlet pointCounter = 1\nlet x = -1\nlet y = -1\n\nconst kaleidoscopeGo = img => {\n  const points = selectPoints(img.width, img.height)\n\n  x = points[0].x\n  y = points[0].y\n\n  let destinationPoint = points[1]\n\n  const loop = () => {\n    clearCanvases()\n    drawWedge(x, y, img)\n    drawInverseWedge()\n    drawWheel()\n\n    const distanceX = Math.abs(x - destinationPoint.x)\n    const distanceY = Math.abs(y - destinationPoint.y)\n\n    if (distanceX === 0 && distanceY === 0) {\n      pointCounter = (pointCounter + 1) % POINTS\n      destinationPoint = points[pointCounter]\n    } else if (distanceX === distanceY) {\n      x += nextPoint(x, destinationPoint.x)\n      y += nextPoint(y, destinationPoint.y)\n    } else if (distanceX > distanceY) {\n      x += nextPoint(x, destinationPoint.x)\n    } else {\n      y += nextPoint(y, destinationPoint.y)\n    }\n\n    if (runState) {\n      window.requestAnimationFrame(loop)\n    }\n  }\n\n  runState = true\n  window.requestAnimationFrame(loop)\n}\n\n/* SELECTING A SUPPLIED IMAGE */\nconst selectImage = (e) => {\n  runState = false\n\n  window.requestAnimationFrame(() => {\n    const img = new Image()\n    img.onload = () => kaleidoscopeGo(img)\n    img.src = e.target.src\n  })\n}\n\nconst options = document.getElementsByClassName('optionImg')\n\nfor (let i = 0; i < options.length; i++) {\n  options[i].onclick = selectImage\n}\n\n/* CONTROLLING THE SPEED */\ndocument.getElementById('slowSpeed').onclick = () => speed = 0.5\ndocument.getElementById('fastSpeed').onclick = () => speed = 1\n\n/* HANDLING UPLOADING A FILE */\nconst handleFiles = () => {\n  runState = false\n\n  const file = inputElement.files[0]\n  const reader = new FileReader()\n  \n  reader.onload = (e) => {\n    const img = new Image()\n    img.onload = () => kaleidoscopeGo(img)\n    img.src = e.target.result\n  }\n\n  reader.readAsDataURL(file)\n}\n\nconst inputElement = document.getElementById('upload')\ninputElement.addEventListener(\"change\", handleFiles, false)\n\n\n/* SELECTING THE FIRST IMAGE BY DEFAULT */\noptions[0].click()"]}